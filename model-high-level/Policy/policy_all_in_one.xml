<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="3"
      main_tree_to_execute="BehaviorTree">

  <BehaviorTree ID="BehaviorTree">
    <ReactiveSequence>
    <ReactiveSequence>
      <ReactiveFallback>
        <ROS2Condition name="BatteryLevel"
                       interface="ROS2SERVICE"
                       isMonitored="false"/>
        <ReactiveFallback>
          <ReactiveSequence>
            <Inverter>
              <ROS2Condition name="BatteryCharging"
                             interface="ROS2SERVICE"
                             isMonitored="false"/>
            </Inverter>
            <Parallel failure_threshold="1"
                      success_threshold="2">
              <ReactiveFallback>
                <ROS2Condition name="IsAtChargingStation"
                               interface="ROS2SERVICE"
                               isMonitored="false"/>
                <Sequence>
                  <ROS2Action name="ResetTour"
                              interface="ROS2SERVICE"
                              isMonitored="false"/>
                  <ROS2Action name="GoToChargingStation"
                              interface="ROS2SERVICE"
                              isMonitored="false"/>
                </Sequence>
              </ReactiveFallback>
              <ROS2Action name="AlarmBatteryLow"
                          interface="ROS2SERVICE"
                          isMonitored="false"/>
            </Parallel>
          </ReactiveSequence>
          <ROS2Action name="Wait"
                      interface="ROS2SERVICE"
                      isMonitored="false"/>
        </ReactiveFallback>
      </ReactiveFallback>
      <Parallel failure_threshold="1"
                success_threshold="2">
        <ROS2Action name="NotifyCharged"
                    interface="ROS2SERVICE"
                    isMonitored="false"/>
        <ROS2Condition name="IsAllowedToMove"
                       interface="ROS2SERVICE"
                       isMonitored="false"/>
      </Parallel>
    </ReactiveSequence>
    <ReactiveFallback>
      <Inverter>
        <ROS2Condition name="NetworkStatusChanged"
                       interface="ROS2SERVICE"
                       isMonitored="false"/>
      </Inverter>
      <ReactiveFallback>
        <ReactiveSequence>
          <ROS2Condition name="NetworkUp"
                         interface="ROS2SERVICE"
                         isMonitored="false"/>
          <ROS2Action name="StopService"
                      interface="ROS2SERVICE"
                      isMonitored="false"/>
        </ReactiveSequence>
        <ROS2Action name="StartService"
                    interface="ROS2SERVICE"
                    isMonitored="false"/>
      </ReactiveFallback>
    </ReactiveFallback>
      <Sequence>
    <Fallback>
      <Inverter>
        <ROS2Condition name="CheckIfStart"
                       interface="ROS2SERVICE"
                       isMonitored="false"/>
      </Inverter>
      <Inverter>
        <ROS2Condition name="IsMuseumClosing"
                       interface="ROS2SERVICE"
                       isMonitored="false"/>
      </Inverter>
    </Fallback>
    <Fallback>
      <Sequence>
        <Inverter>
          <ROS2Condition name="IsPoiDone0"
                         interface="ROS2SERVICE"
                         isMonitored="false"/>
        </Inverter>
        <ROS2Action name="SetPoi0"
                    interface="ROS2SERVICE"
                    isMonitored="false"/>
      </Sequence>
      <Sequence>
        <Inverter>
          <ROS2Condition name="IsPoiDone1"
                         interface="ROS2SERVICE"
                         isMonitored="false"/>
        </Inverter>
        <ROS2Action name="SetPoi1"
                    interface="ROS2SERVICE"
                    isMonitored="false"/>
      </Sequence>
      <Sequence>
        <Inverter>
          <ROS2Condition name="IsPoiDone2"
                         interface="ROS2SERVICE"
                         isMonitored="false"/>
        </Inverter>
        <ROS2Action name="SetPoi2"
                    interface="ROS2SERVICE"
                    isMonitored="false"/>
      </Sequence>
      <Sequence>
        <Inverter>
          <ROS2Condition name="IsPoiDone3"
                         interface="ROS2SERVICE"
                         isMonitored="false"/>
        </Inverter>
        <ROS2Action name="SetPoi3"
                    interface="ROS2SERVICE"
                    isMonitored="false"/>
      </Sequence>
      <Sequence>
        <Inverter>
          <ROS2Condition name="IsPoiDone4"
                         interface="ROS2SERVICE"
                         isMonitored="false"/>
        </Inverter>
        <ROS2Action name="SetPoi4"
                    interface="ROS2SERVICE"
                    isMonitored="false"/>
      </Sequence>
      <Sequence>
        <Inverter>
          <ROS2Condition name="IsPoiDone5"
                         interface="ROS2SERVICE"
                         isMonitored="false"/>
        </Inverter>
        <ROS2Action name="SetPoi5"
                    interface="ROS2SERVICE"
                    isMonitored="false"/>
      </Sequence>
      <ROS2Action name="ResetTourAndFlags"
                  interface="ROS2SERVICE"
                  isMonitored="false"/>
    </Fallback>
    <ReactiveFallback>
      <ROS2Condition name="IsAtCurrentPoi"
                     interface="ROS2SERVICE"
                     isMonitored="false"/>
      <ReactiveSequence>
    <ReactiveFallback>
      <ROS2Condition name="CheckIfStart"
                     interface="ROS2SERVICE"
                     isMonitored="false"/>
      <Inverter>
        <ROS2Condition name="IsAllowedToTurnBack"
                       interface="ROS2SERVICE"
                       isMonitored="false"/>
      </Inverter>
      <ROS2Condition name="VisitorsFollowingRobot"
                     interface="ROS2SERVICE"
                     isMonitored="false"/>
      <ReactiveSequence>
        <ReactiveFallback>
          <ROS2Condition name="IsCheckingForPeople"
                         interface="ROS2SERVICE"
                         isMonitored="false"/>
          <ReactiveSequence>
            <ROS2Action name="SetTurning"
                        interface="ROS2SERVICE"
                        isMonitored="false"/>
            <ROS2Action name="StopAndTurnBack"
                        interface="ROS2SERVICE"
                        isMonitored="false"/>
            <ROS2Action name="SetTurned"
                        interface="ROS2SERVICE"
                        isMonitored="false"/>
          </ReactiveSequence>
        </ReactiveFallback>
        <ROS2Action name="RunTimer"
                    interface="ROS2SERVICE"
                    isMonitored="false"/>
        <ROS2Action name="Wait"
                    interface="ROS2SERVICE"
                    isMonitored="false"/>
      </ReactiveSequence>
    </ReactiveFallback>
        <ReactiveSequence>
          <ROS2Action name="SetNotTurning"
                      interface="ROS2SERVICE"
                      isMonitored="false"/>
          <ROS2Action name="GoToPoiAction"
                      interface="ROS2SERVICE"
                      isMonitored="false"/>
        </ReactiveSequence>
      </ReactiveSequence>
    </ReactiveFallback>
    <Sequence>
      <ROS2Action name="SetCurrentPoiDone"
                  interface="ROS2SERVICE"
                  isMonitored="false"/>
      <ROS2Action name="ResetCounters"
                  interface="ROS2SERVICE"
                  isMonitored="false"/>
      <ROS2Action name="SetNavigationPosition"
                  interface="ROS2SERVICE"
                  isMonitored="false"/>
    </Sequence>
      </Sequence>
    </ReactiveSequence>
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->


</root>
